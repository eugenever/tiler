{
  "id": "rf274ed8-f592-4a74-bfed-ef56cbdbcd10",
  "type": "vector",
  "dataStore": {
    "type": "vector",
    "store": "internal",
    "host": "10.0.3.221",
    "port": 8000
  },
  "pyramidSettings": {
    "count_processes": 10,
    "minzoom": 1,
    "maxzoom": 12
  },
  "attribution": "Empty",
  "description": "Example PostgreSQL/PostGIS Vector DataSource",
  "version": "0.0.1",
  "buffer": 64,
  "extent": 4096,
  "minzoom": 0,
  "maxzoom": 19,
  "mbtiles": true,
  "bounds": {
    "lng_w": 19.2,
    "lat_s": 42.2,
    "lng_e": 180,
    "lat_n": 77.8
  },
  "center": [37.617627, 55.755829, 11],
  "compress_tiles": true,
  "use_cache_only": false,
  "layers": [
    {
      "id": "aerialway",
      "type": "polygon",
      "description": "Layer of aerialway",
      "minzoom": 13,
      "maxzoom": 20,
      "queries": [
        {
          "minzoom": 13,
          "maxzoom": 20,
          "sql": "SELECT tags, geom FROM osm_ways WHERE tags ? 'aerialway'"
        }
      ]
    },
    {
      "id": "aeroway",
      "type": "polygon",
      "description": "Layer of aeroway",
      "minzoom": 13,
      "maxzoom": 20,
      "queries": [
        {
          "minzoom": 13,
          "maxzoom": 20,
          "sql": "SELECT tags, geom FROM osm_ways WHERE tags ? 'aeroway'"
        }
      ]
    },
    {
      "id": "amenity",
      "type": "polygon",
      "description": "Layer of amenity",
      "minzoom": 13,
      "maxzoom": 20,
      "queries": [
        {
          "minzoom": 13,
          "maxzoom": 20,
          "sql": "SELECT jsonb_build_object('amenity', tags->'amenity') AS tags, geom FROM osm_ways WHERE tags ? 'amenity'"
        }
      ]
    },
    {
      "id": "attraction",
      "type": "polygon",
      "minzoom": 13,
      "maxzoom": 20,
      "queries": [
        {
          "minzoom": 13,
          "maxzoom": 20,
          "sql": "SELECT tags, geom FROM osm_ways WHERE tags ? 'attraction'"
        }
      ]
    },
    {
      "id": "boundary",
      "type": "polygon",
      "minzoom": 13,
      "maxzoom": 20,
      "queries": [
        {
          "minzoom": 13,
          "maxzoom": 20,
          "sql": "SELECT jsonb_build_object('admin_level', tags->'admin_level') AS tags, geom FROM osm_ways WHERE tags ? 'boundary'"
        }
      ]
    },
    {
      "id": "building",
      "type": "polygon",
      "minzoom": 14,
      "maxzoom": 20,
      "queries": [
        {
          "minzoom": 14,
          "maxzoom": 20,
          "sql": "\n                SELECT\n                    jsonb_build_object('building', tags->'building', 'building:part', tags->'building:part')\n                        || jsonb_build_object('extrusion:base',\n                            CASE\n                                WHEN tags ? 'min_height'\n                                    THEN convert_to_number(tags ->> 'min_height', 0)\n                                WHEN tags ? 'building:min_height'\n                                    THEN convert_to_number(tags ->> 'building:min_height', 0)\n                                WHEN tags ? 'building:min_level'\n                                    THEN convert_to_number(tags ->> 'building:min_level', 0) * 3\n                                ELSE 0\n                            END)\n                        || jsonb_build_object('extrusion:height', \n                            CASE\n                                WHEN tags ? 'height'\n                                    THEN convert_to_number(tags ->> 'height', 6)\n                                WHEN tags ? 'building:height'\n                                    THEN convert_to_number(tags ->> 'building:height', 6)\n                                WHEN tags ? 'building:levels'\n                                    THEN convert_to_number(tags ->> 'building:levels', 2) * 3\n                                ELSE 6\n                            END) as tags,\n                    geom\n                FROM osm_ways\n                WHERE (tags ? 'building' OR tags ? 'building:part') AND ((NOT tags ? 'layer') OR convert_to_number(tags ->> 'layer', 0) >= 0)"
        },
        {
          "minzoom": 14,
          "maxzoom": 20,
          "sql": "\n                SELECT\n                    jsonb_build_object('building', tags->'building', 'building:part', tags->'building:part')\n                        || jsonb_build_object('extrusion:base',\n                            CASE\n                                WHEN tags ? 'min_height'\n                                    THEN convert_to_number(tags ->> 'min_height', 0)\n                                WHEN tags ? 'building:min_height'\n                                    THEN convert_to_number(tags ->> 'building:min_height', 0)\n                                WHEN tags ? 'building:min_level'\n                                    THEN convert_to_number(tags ->> 'building:min_level', 0) * 3\n                                ELSE 0\n                            END)\n                        || jsonb_build_object('extrusion:height',\n                            CASE\n                                WHEN tags ? 'height'\n                                    THEN convert_to_number(tags ->> 'height', 6)\n                                WHEN tags ? 'building:height'\n                                    THEN convert_to_number(tags ->> 'building:height', 6)\n                                WHEN tags ? 'building:levels'\n                                    THEN convert_to_number(tags ->> 'building:levels', 2) * 3\n                                ELSE 6\n                            END) as tags,\n                    geom\n                FROM osm_relations\n                WHERE (tags ? 'building' OR tags ? 'building:part') AND ((NOT tags ? 'layer') OR convert_to_number(tags ->> 'layer', 0) >= 0)"
        }
      ]
    },
    {
      "id": "highway",
      "type": "polygon",
      "minzoom": 4,
      "maxzoom": 20,
      "queries": [
        {
          "minzoom": 4,
          "maxzoom": 13,
          "sql": "SELECT jsonb_build_object('highway', tags->'highway', 'tunnel', tags->'tunnel', 'area', tags->'area', 'bicycle', tags->'bicycle', 'access', tags->'access', 'construction', tags->'construction', 'railway', tags->'railway', 'name', tags->'name') AS tags, geom FROM osm_highway_z$zoom"
        },
        {
          "minzoom": 14,
          "maxzoom": 20,
          "sql": "SELECT jsonb_build_object('highway', tags->'highway', 'tunnel', tags->'tunnel', 'area', tags->'area', 'bicycle', tags->'bicycle', 'access', tags->'access', 'construction', tags->'construction', 'railway', tags->'railway', 'name', tags->'name') AS tags, geom FROM osm_ways WHERE tags ? 'highway'"
        }
      ]
    },
    {
      "id": "landuse",
      "type": "polygon",
      "minzoom": 1,
      "maxzoom": 20,
      "queries": [
        {
          "minzoom": 1,
          "maxzoom": 12,
          "sql": "SELECT jsonb_build_object('landuse', tags->'landuse') AS tags, geom FROM osm_landuse_z$zoom WHERE tags ? 'landuse'"
        },
        {
          "minzoom": 13,
          "maxzoom": 20,
          "sql": "SELECT jsonb_build_object('landuse', tags->'landuse') AS tags, geom FROM osm_ways WHERE tags ? 'landuse'"
        },
        {
          "minzoom": 13,
          "maxzoom": 20,
          "sql": "SELECT jsonb_build_object('landuse', tags->'landuse') AS tags, geom FROM osm_relations WHERE tags ? 'landuse'"
        }
      ]
    },
    {
      "id": "leisure",
      "type": "polygon",
      "minzoom": 1,
      "maxzoom": 20,
      "queries": [
        {
          "minzoom": 1,
          "maxzoom": 12,
          "sql": "SELECT jsonb_build_object('leisure', tags->'leisure') AS tags, geom FROM osm_leisure_z$zoom WHERE tags ? 'leisure'"
        },
        {
          "minzoom": 13,
          "maxzoom": 20,
          "sql": "SELECT jsonb_build_object('leisure', tags->'leisure') AS tags, geom FROM osm_ways WHERE tags ? 'leisure'"
        },
        {
          "minzoom": 13,
          "maxzoom": 20,
          "sql": "SELECT jsonb_build_object('leisure', tags->'leisure') AS tags, geom FROM osm_relations WHERE tags ? 'leisure'"
        }
      ]
    },
    {
      "id": "man_made",
      "type": "polygon",
      "minzoom": 14,
      "maxzoom": 20,
      "queries": [
        {
          "minzoom": 14,
          "maxzoom": 20,
          "sql": "SELECT jsonb_build_object('man_made', tags->'man_made', 'name', tags->'name') AS tags, geom FROM osm_ways WHERE tags ? 'man_made'"
        }
      ]
    },
    {
      "id": "natural",
      "type": "polygon",
      "minzoom": 1,
      "maxzoom": 20,
      "queries": [
        {
          "minzoom": 1,
          "maxzoom": 7,
          "sql": "SELECT jsonb_build_object('natural', tags->'natural', 'water', tags->'water', 'surface', tags->'surface') AS tags, geom FROM osm_natural_z$zoom WHERE tags ->> 'natural' IN ('wood', 'scrub', 'heath', 'grassland', 'bare_rock', 'scree', 'shingle', 'sand', 'mud', 'water', 'wetland', 'glacier', 'beach')"
        },
        {
          "minzoom": 8,
          "maxzoom": 12,
          "sql": "SELECT jsonb_build_object('natural', tags->'natural', 'water', tags->'water', 'surface', tags->'surface') AS tags, geom FROM osm_natural_z$zoom WHERE tags ->> 'natural' IN ('wood', 'scrub', 'heath', 'grassland', 'bare_rock', 'scree', 'shingle', 'sand', 'mud', 'water', 'wetland', 'glacier', 'beach')"
        },
        {
          "minzoom": 13,
          "maxzoom": 20,
          "sql": "SELECT jsonb_build_object('natural', tags->'natural', 'water', tags->'water', 'surface', tags->'surface') AS tags, geom FROM osm_ways WHERE tags ? 'natural' AND tags ->> 'natural' NOT IN ('coastline')"
        },
        {
          "minzoom": 13,
          "maxzoom": 20,
          "sql": "SELECT jsonb_build_object('natural', tags->'natural', 'water', tags->'water', 'surface', tags->'surface') AS tags, geom FROM osm_relations WHERE tags ? 'natural' AND tags ->> 'natural' NOT IN ('coastline')"
        }
      ]
    },
    {
      "id": "ocean",
      "type": "polygon",
      "minzoom": 0,
      "maxzoom": 20,
      "queries": [
        {
          "minzoom": 0,
          "maxzoom": 9,
          "sql": "SELECT tags, geom FROM osm_ocean_simplified"
        },
        {
          "minzoom": 10,
          "maxzoom": 20,
          "sql": "SELECT tags, geom FROM osm_ocean"
        }
      ]
    },
    {
      "id": "point",
      "type": "point",
      "minzoom": 1,
      "maxzoom": 20,
      "queries": [
        {
          "minzoom": 1,
          "maxzoom": 2,
          "sql": "SELECT jsonb_build_object('name', tags->'name', 'population', tags -> 'population', 'place', tags -> 'place') as tags, geom FROM osm_point_z$zoom WHERE tags != '{}' AND (tags ->> 'place' = 'country')"
        },
        {
          "minzoom": 3,
          "maxzoom": 8,
          "sql": "SELECT jsonb_build_object('name', tags->'name', 'population', tags -> 'population', 'place', tags -> 'place', 'capital', tags -> 'capital') as tags, geom FROM osm_point_z$zoom WHERE tags != '{}'"
        },
        {
          "minzoom": 9,
          "maxzoom": 20,
          "sql": "SELECT jsonb_build_object('name', tags->'name', 'population', tags->'population', 'capital', tags->'capital', 'entrance', tags->'entrance', 'place', tags->'place', 'telescope:type', tags->'telescope:type', 'tower:construction', tags->'tower:construction', 'advirtising', tags->'advertising', 'military', tags->'military', 'generator:method', tags->'generator:method', 'generator:source', tags->'generator:source', 'tower:type', tags->'tower:type', 'religion', tags->'religion', 'diplomatic', tags->'diplomatic', 'office', tags->'office', 'waterway', tags->'waterway', 'ford', tags->'ford', 'barrier', tags->'barrier', 'aeroway', tags->'aeroway', 'railway', tags->'railway', 'highway', tags->'highway', 'parking', tags->'parking', 'emergency', tags->'emergency', 'information', tags->'information', 'vending', tags->'vending', 'golf', tags->'golf', 'shop', tags->'shop', 'sport', tags->'sport', 'leisure', tags->'leisure', 'man_made', tags->'man_made', 'castle_type', tags->'castle_type', 'artwork_type', tags->'artwork_type', 'memorial', tags->'memorial', 'historic', tags->'historic', 'tourism', tags->'tourism', 'power', tags->'power', 'natural', tags->'natural', 'amenity', tags->'amenity', 'leisure', tags->'leisure') AS tags, geom FROM osm_point_z$zoom WHERE tags != '{}'"
        }
      ]
    },
    {
      "id": "power",
      "type": "polygon",
      "minzoom": 13,
      "maxzoom": 20,
      "queries": [
        {
          "minzoom": 13,
          "maxzoom": 20,
          "sql": "SELECT jsonb_build_object('power', tags->'power') AS tags, geom FROM osm_ways WHERE tags ->> 'power' IN ('cable', 'line', 'minor_line', 'plant', 'substation')"
        }
      ]
    },
    {
      "id": "railway",
      "type": "polygon",
      "minzoom": 9,
      "maxzoom": 20,
      "queries": [
        {
          "minzoom": 9,
          "maxzoom": 12,
          "sql": "SELECT jsonb_build_object('railway', tags->'railway', 'service', tags->'service') AS tags, geom FROM osm_railway_z$zoom"
        },
        {
          "minzoom": 13,
          "maxzoom": 20,
          "sql": "SELECT jsonb_build_object('railway', tags->'railway', 'service', tags->'service') AS tags, geom FROM osm_ways WHERE tags ? 'railway'"
        }
      ]
    },
    {
      "id": "route",
      "type": "polygon",
      "minzoom": 9,
      "maxzoom": 20,
      "queries": [
        {
          "minzoom": 9,
          "maxzoom": 12,
          "sql": "SELECT tags, geom FROM osm_route_z$zoom WHERE tags ? 'route'"
        },
        {
          "minzoom": 13,
          "maxzoom": 20,
          "sql": "SELECT tags, geom FROM osm_ways WHERE tags ? 'route'"
        }
      ]
    },
    {
      "id": "waterway",
      "type": "polygon",
      "minzoom": 6,
      "maxzoom": 20,
      "queries": [
        {
          "minzoom": 6,
          "maxzoom": 10,
          "sql": "SELECT jsonb_build_object('tunnel', tags->'tunnel') AS tags, geom FROM osm_waterway_z$zoom WHERE tags ->> 'waterway' IN ('river')"
        },
        {
          "minzoom": 10,
          "maxzoom": 12,
          "sql": "SELECT jsonb_build_object('tunnel', tags->'tunnel') AS tags, geom FROM osm_waterway_z$zoom WHERE tags ->> 'waterway' IN ('river', 'stream')"
        },
        {
          "minzoom": 13,
          "maxzoom": 20,
          "sql": "SELECT jsonb_build_object('tunnel', tags->'tunnel') AS tags, geom FROM osm_ways WHERE tags ? 'waterway'"
        }
      ]
    }
  ]
}
